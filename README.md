# ToKachiXML

[e-Gov法令検索](https://elaws.e-gov.go.jp/)からダウンロードしたXMLデータから、ハイパーリンクの設定をしたマークダウン・ファイルを作成するプログラムです。

~~[obsidian](https://obsidian.md/)を用いる場合は、[タグペイン](https://publish.obsidian.md/help-ja/%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3/%E3%82%BF%E3%82%B0%E3%83%9A%E3%82%A4%E3%83%B3)を使うと便利です。~~

税法を前提に、法・施行令・施行規則をセットで処理しますが、税法以外の法律（例えば、会社法）でも使えます。

ハイパーリンクの設定は、設定漏れのものや誤った設定のものもありますので、ご容赦ください。

実際に作成したファイルをアップロードしています。一部、別表などの表の表示が異なるもの（~~上段、下段などのタイトルあり~~）があります。

ダウンロード後に、解凍して下さい。

~~租税特別措置法と地方税法は、masterブランチの下のToKachiXMLにあります。~~
~~https://github.com/sue-tax/ToKachiXML/tree/master/ToKachiXML~~

租税特別措置法は、解凍後のファイル数が65,536を超えるので、解凍ソフトによっては全部を解凍できないことがあります。

閲覧等には、[obsidian](https://obsidian.md/)や、[typora](https://typora.io/)を使うと便利です。

マークダウン・ファイルは単なるテキストファイルなので、メモを書き足したり、不要部分を削除したりできます。

## ファイル名

全て、拡張子は`md`です。

附則については、項しかない場合がありますが、便宜上、第０条としています。

### indexＸＸＸＸ法

目次用のファイルです。

各条文に、ハイパーリンク設定されています。

`[TOC]`は、typora用です。見出しにジャンプします。obsidianでは機能しません。

obsidianは、見出しごとの折り畳み（見出しの左側の▽のようなものをクリック）を使うと、便利です。

### ＸＸＸＸ法＿＿＿＿＿第Ｘ条第Ｘ項
その項の本文です。```＿```は５つ連続していれば、本則です。

項が１つしかない条については、便宜上、第１項としています。

### ＸＸＸＸ法＿＿＿＿＿第Ｘ条第Ｘ項第Ｘ号
その号及び号以下のイロハや（１）なども含む本文です。```＿```は５つ連続していれば、本則です。

### ＸＸＸＸ法＿＿＿＿附則令和Ｙ年Ｍ月Ｄ日法律第ＷＷＷ号＿第Ｙ条第Ｚ項
附則のその項の本文です。```＿```は４つ連続しています。

附則の日付の後に法律番号などを追加しました。同一日付の附則がある場合があったためです。

附則の後ろに```＿```を追加しました。処理プログラムの都合です。（version0.8.0以降）

附則には条がなく、項だけのものがありますが、便宜上、第０項としています。

### ＸＸＸＸ法＿＿＿＿＿第Ｘ条_
最後に半角ハイフンが付いていれば、その条全体の本文です。~~ハイパーリンクの設定はありません。~~

### ＸＸＸＸ法＿＿＿＿＿第Ｘ条第Ｘ項_
最後に```_```が付いていれば、その項全体の本文です。~~ハイパーリンクの設定はありません。~~

### ＸＸＸＸ法施行＿令＿第Ｘ条第Ｘ項
その項の本文です。```令```の前に```＿```があります。```令```の後ろに```＿```があれば、本則です。

### ＸＸＸＸ法施行規則＿第Ｘ条第Ｘ項
その項の本文です。```規則```の後ろに```＿```があれば、本則です。

### ＸＸＸＸ法＿＿＿＿別表Ｘ
別表です。```＿```は４つ連続しています。

※```＿```はファイルを文字コード（アルファベット）順に並べることを意識しています。

## ファイル内容

### 条の見出し

### 条文の番号（法令名、条、項、号など）

### 本文

### ジャンプ
`前条←`、`→次項`、`第２項`などに、ハイパーリンクの設定をしています。

obsidianでは、ctrlキーを押しながら、マウスカーソルをあわせると、ハイパーリンク先のファイル内容がバルーン表示されます。ctrlキーを押しながら、マウスクリックするとハイバーリンク先のファイルが開きます。

前条、次条は、目などの範囲内です。

例えば、所得税法第４６条は第１目、第４７条は第２目なので、第４６条には`次条`が表示されず、第４７条には`前条`が表示されません。

複数の削除された条がある場合は次条、前条は対応できていません。例えば、相続税法第５６条及び第５７条は措駆除されていますので、第５５条には`次条`が表示されません。

`第Ｘ項（全）`は項以下の号も表示されます~~がハイパーリンクの設定はありません~~。
`第Ｘ項  　`は項の本文のみの表示で、号は表示されません。ハイパーリンクの設定があります。


~~### タグ表示~~
~~obsidianのタグペイン機能用です。~~

~~```_第９章雑則```のように先頭には```_```が付いています。~~

### ハイパーリンク
```[第三十二条](消費税法＿＿＿＿＿第３２条第１項)```のように設定しています。

obsidianでは、ctrlキーを押しながら、マウスカーソルをあわせると、ハイパーリンク先のファイル内容がバルーン表示されます。ctrlキーを押しながら、マウスクリックするとハイバーリンク先のファイルが開きます。

最後に```_```が付いているファイル`条(全）、項(全）`にも、ハイパーリンクの設定をしました。

一部、未対応のものがあります。`version0.7.3file`となっているファイルは対応済みです。

`第Ｘ条第Ｚ項`のパターンに対応中です。`version0.7.4file`となっているファイルは対応済みです。

### カラー化
カッコ`（）`や、カギカッコ`「」`で囲われた部分の色を変えています。

カッコが連続（ネスト）すると、さらに別の色に変えています。

背景は黒より白の方が見やすいと思います（obisidianでは、「設定」で「外観」の「ベーステーマ」を「ライト」にします）。

~~一部、未対応のものがあります。`version0.7.3file`となっているファイルは対応済みです。~~

## ファイル・バージョン

### version0.7.4file

カラー化処理が不十分な場合あり

### version0.7.7file

カギカッコ`「」`で囲われた部分も、色を変えています。

ルビの前後の処理が誤っている可能性があります。

### version0.7.8file

ルビの後に改行されるのを修正しました。

### version0.8.0file

見出し内のルビに対応しました。

施行令と施行規則の間のハイパーリンクを充実させました。

### version0.8.1file

ハイパーリンクで、第４条の２内の「前条」が４条の１になってしまっているのを修正しました。

### version0.8.2file

条文のタイトルの変更（＿から全角空白へ）

### version0.8.3file

ルビ（ふりがな）の処理の修正（不要な改行が入っていたのを、入らないようにした）

### version0.8.4file

イ、ロ、ハなどの前にインデントとして全角空白を挿入

ローマ数字を変更（ⅰⅰをⅱになど）

### verision0.9.0file

「法第二十三条の二第一項第二号イに規定する」などに対するハイパーリンクを設定

### version0.9.1file

項の本文に続く表に対応

### version0.9.1afile

号の本文に続く表に対応

### version0.9.2file

イロハや(1)(2)の途中に空白を追加

### version0.9.3file

同条第Ｘ項や同項第Ｘ号にハイパーリンクを設定



## 開発予定

~~`ＸＸＸＸ法＿＿＿＿＿第Ｘ条_.md`や`ＸＸＸＸ法＿＿＿＿＿第Ｘ条第Ｘ項_.md`などの最後に半角ハイフンが付いているファイルには、ハイパーリンクの設定はありません。
これらのファイルにも、ハイパーリンクの設定をすることを検討しています。~~
